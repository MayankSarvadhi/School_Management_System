# Role-Based School Management System

## Introduction
The Role-Based School Management System is a web application designed to manage various aspects of a school, including class management, attendance tracking, lecture scheduling, and more. The application has three user roles: Principal, Teacher, and Student, each with specific functionalities and access permissions.

## Project Goals
The main goals of this project are as follows:
1. Implement user registration and login functionality with role-based access control.
2. Store user details in a PostgreSQL database with hashed passwords for security.
3. Create middleware to enforce role-based access control for various API endpoints.
4. Allow the Principal to create and manage classes, teachers, and view reports.
5. Enable Teachers to mark attendance, schedule lectures, and report issues with specific students.
6. Enable Students to view their own data, including attendance records and class schedules.
7. Implement a secure authentication mechanism using JWT for user sessions.
8. Handle errors appropriately and provide meaningful error messages in API responses.
9. Design the database schema with appropriate tables and relationships.
10. Write test cases to validate the functionality of different API endpoints.

## Technologies Used
- Node.js: Backend server using JavaScript runtime.
- Express.js: Web application framework for building APIs.
- PostgreSQL: Relational database for storing user details, attendance records, and schedules.
- Sequelize: ORM (Object-Relational Mapping) for database interactions.
- Passport.js: Library for authentication and authorization.
- JWT (JSON Web Tokens): For secure communication and user session management.

## Project Structure
The project will be structured as follows:

- `src`: Directory containing the application's source code.
  - `config`: Directory containing configuration files for the database and authentication.
  - `constant`: Directory containing constant variable.
  - `models`: Directory containing the Sequelize models for database interactions.
  - `controllers`: Directory containing the route handlers for different API endpoints.
  - `middleware`: Directory containing custom middleware for role-based access control and error handling.
  - `routes`: Directory containing the route definitions for different API endpoints.
  - `utils`: Directory containing utility functions or classes.
  - `app.js`: Entry point for the Express application.
- `.env`: Configuration file for environment variables, such as database credentials and JWT secret.
- `.eslintrc.json` : Configuration file for ESLint, a linter tool to enforce code quality and consistency.
- `.gitignore` : File that specifies which files and directories to ignore when committing changes to version control (e.g., node_modules, .env).
- `.prettierrc` : Configuration file for Prettier, a code formatter that helps maintain consistent code styles.
- `package.json` : File containing metadata about the project and the list of dependencies required for the project to run.
- `tsconfig.json` : Configuration file for TypeScript, specifying the TypeScript compiler options.
- `yarn.lock` : File automatically generated by Yarn, locking the versions of installed dependencies to ensure consistency across different environments.

## Project Implementation Steps
1. Set up the project structure and install required dependencies.
2. Create the PostgreSQL database and design the schema for user details, attendance records, schedules, etc.
3. Implement user registration and login functionality with hashed passwords and JWT for authentication.
4. Implement role-based access control middleware to restrict access to certain routes based on user roles.
5. Create API endpoints for class management, attendance management, lecture scheduling, reporting, and more.
6. Design the front-end UI (optional) to interact with the backend API.
7. Handle errors properly and provide appropriate error messages in API responses.
8. Write test cases to validate the functionality of different API endpoints.
9. Perform thorough testing and debugging.
10. Deploy the application to a server (optional).

## Project Setup and Running

To run the Role-Based School Management System on your local server, follow these steps:

### Prerequisites

- Node.js and npm should be installed on your machine.

### Step 1: Install Yarn

Yarn is a package manager that helps manage project dependencies. To install Yarn, visit the official Yarn website (https://yarnpkg.com/) and follow the installation instructions for your operating system.

### Step 2: Install Project Dependencies

Once Yarn is installed, navigate to the project directory and run the following command to install the project dependencies:

```yarn install```

### Step 3: Build the Project

Before starting the server, you need to build the project. This step is essential for TypeScript projects to compile the code to JavaScript.

Run the following command to build the project:

```yarn build```

The build process will generate JavaScript files from the TypeScript source files and place them in the dist directory.

### Step 4: Start the Local Server

After the build is successful, you can start the local server by running the following command:

```yarn start```

The server will start listening on ```http://localhost:3000```.

You should see a message in the console indicating that the server has started successfully.

## API Endpoints

| Endpoint          | Description                                                             |
|-------------------|-------------------------------------------------------------------------|
| /user             | User-related operations, e.g., registration, user details update.       |
| /auth/login       | Authentication and login functionality.                                |
| /auth/logout      | Authentication and logout functionality.                                |
| /auth/forgot      | Authentication and forgot Password functionality.                                |
| /class            | Class management, adding, and removing classes. Restricted to Principal role. |
| /attendance       | Attendance management, marking attendance. Restricted to Teacher and Principal roles. |
| /lecture          | Lecture scheduling for classes. Restricted to Teacher and Principal roles. |
| /reporting        | Reporting issues with students. Restricted to Teacher and Principal roles. |
| /student          | Adding and removing students to/from classes. Restricted to Teacher role. |
| /student_details  | Viewing student details. Restricted to Student and Principal roles.    |
| /subject          | Subject management, adding, and removing subjects. Restricted to Principal role. |
| /holiday          | Managing holidays and vacation periods. Restricted to Principal role.  |
| /leave            | Leave management for teachers and students. Restricted to Teacher and Student roles. |
| /leave/student    | Leave management for students. Restricted to Teacher and Student roles. |
| /leave/teacher    | Leave management for teacher. Restricted to Teacher and Student roles. |
| /teacher          | Teacher-related operations, e.g., adding, removing, or updating teacher information. Restricted to Principal role. |
| /dashboard        | Access to the dashboard for relevant data and statistics.              |



## Error Handling

Invalid routes and endpoints will be handled using the invalidedRouter middleware, returning a "Bad Request URL not Found" error message.

## Logger Functionality

The application incorporates a logging mechanism using Winston, a popular logging library for Node.js. The Winston logger is used to log various activities and events in the application, such as HTTP requests, errors, and other relevant information.

The logging configuration can be customized to store logs in different formats (e.g., JSON, plain text), log levels (e.g., error, info, debug), and log transport options (e.g., console, file).

By integrating Winston logging, the application gains better visibility into its operations and the ability to troubleshoot issues effectively.

## Security

The application uses JWT (JSON Web Tokens) for secure authentication, and routes are protected with passport.js authentication middleware. Additionally, role-based access control (RBAC) is enforced through the permit middleware, which checks user roles before granting access to certain routes.

## Conclusion
The Role-Based School Management System is a comprehensive web application that allows school administrators, teachers, and students to efficiently manage various school-related tasks. The implementation of role-based access control, secure authentication, and error handling ensures the security and smooth operation of the system.

## Note
Please make sure to follow best practices for secure coding, handle user input validation, and thoroughly test the application before deployment to ensure its robustness and reliability.
